{{ header }}{{ column_left }}
<div id="content">
    <div class="page-header">
        <div class="container-fluid">
            <div class="pull-right">
                <a href="{{ about_link }}" data-toggle="tooltip" title="{{ about_text }}" class="btn btn-light">{{ about_text }}</a>
                <a href="{{ history_link }}" data-toggle="tooltip" title="{{ history_text }}" class="btn btn-light">{{ history_text }}</a>
                <a href="{{ test_link }}" data-toggle="tooltip" title="{{ test_text }}" class="btn btn-light">{{ test_text }}</a>
                <a href="{{ campaign_link }}" data-toggle="tooltip" title="{{ campaign_text }}" class="btn btn-light">{{ campaign_text }}</a>
            </div>
            <br />
            <h1>{{ heading_title }}</h1>
            <ul class="breadcrumb">
                {% for breadcrumb in breadcrumbs %}
                    <li class="breadcrumb-item"><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
                {% endfor %}
            </ul>
        </div>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div id="filter-product" class="col-md-3 col-md-push-9 col-sm-12 hidden-sm hidden-xs">
                <div class="card">
                    <div class="card-header"><i class="fa-solid fa-filter"></i> {{ history_filter }}</div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="input-status">{{ history_status }}</label>
                            <div class="col-sm-10">
                                <input type="text" name="filter_status" value="{{ filter_status }}" placeholder="{{ history_status }}" id="input-status" class="form-control" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="input-message">{{ history_message }}</label>
                            <div class="col-sm-10">
                                <input type="text" name="filter_message" value="{{ filter_message }}" placeholder="{{ history_message }}" id="input-message" class="form-control" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="input-details">{{ history_details }}</label>
                            <div class="col-sm-10">
                                <input type="text" name="filter_details" value="{{ filter_details }}" placeholder="{{ history_details }}" id="input-details" class="form-control" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="input-content">{{ history_content }}</label>
                            <div class="col-sm-10">
                                <input type="text" name="filter_content" value="{{ filter_content }}" placeholder="{{ history_content }}" id="input-content" class="form-control" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="input-type">{{ history_type }}</label>
                            <div class="col-sm-10">
                                <select name="filter_type" id="input-type" class="form-control">
                                        {% if filter_type == 'test' %}
                                            <option value=""></option>
                                            <option value="order">order</option>
                                            <option value="test" selected="selected">test</option>
                                            <option value="campaign">campaign</option>
                                        {% elseif filter_type == 'order' %}
                                            <option value=""></option>
                                            <option value="order" selected="selected">order</option>
                                            <option value="test">test</option>
                                            <option value="campaign">campaign</option>
                                        {% elseif filter_type == 'campaign' %}
                                            <option value=""></option>
                                            <option value="order">order</option>
                                            <option value="test">test</option>
                                            <option value="campaign" selected="selected">campaign</option>
                                        {% else %}
                                            <option value="" selected="selected"></option>
                                            <option value="order">order</option>
                                            <option value="test">test</option>
                                            <option value="campaign">campaign</option>
                                        {% endif %}
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="input-phone">{{ history_phone }}</label>
                            <div class="col-sm-10">
                                <input type="text" name="filter_phone" value="{{ filter_phone }}" placeholder="{{ history_phone }}" id="input-phone" class="form-control" />
                            </div>
                        </div>
                        <div class="row mb-3">
                            <label class="col-sm-2 col-form-label" for="input-date">{{ history_date }}</label>
                            <div class="col-sm-10">
                                <div class="input-group">
                                    <input type="text" name="filter_date" value="{{ filter_date }}" placeholder="{{ history_date }}" id="input-date" class="form-control" />
                                    <span class="input-group-text">
                                        <i class="fa fa-calendar"></i>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="d-grid gap-2">
                            <button type="button" id="button-filter" class="btn btn-block btn-primary"><i class="fa fa-filter"></i> {{ button_filter }}</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9 col-md-pull-3 col-sm-12">
                <div class="card">
                    <div class="card-header"><i class="fa fa-list"></i> {{ heading_title }}</div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-bordered table-hover">
                                <thead>
                                <tr>
                                    <td class="text-left">{% if sort == 'status' %} <a href="{{ sort_status }}" class="{{ order|lower }}">{{ history_status }}</a> {% else %} <a href="{{ sort_status }}">{{ history_status }}</a> {% endif %}</td>
                                    <td class="text-left">{% if sort == 'message' %} <a href="{{ sort_message }}" class="{{ order|lower }}">{{ history_message }}</a> {% else %} <a href="{{ sort_message }}">{{ history_message }}</a> {% endif %}</td>
                                    <td class="text-left">{% if sort == 'details' %} <a href="{{ sort_details }}" class="{{ order|lower }}">{{ history_details }}</a> {% else %} <a href="{{ sort_details }}">{{ history_details }}</a> {% endif %}</td>
                                    <td class="text-left">{% if sort == 'content' %} <a href="{{ sort_content }}" class="{{ order|lower }}">{{ history_content }}</a> {% else %} <a href="{{ sort_content }}">{{ history_content }}</a> {% endif %}</td>
                                    <td class="text-left">{% if sort == 'type' %} <a href="{{ sort_type }}" class="{{ order|lower }}">{{ history_type }}</a> {% else %} <a href="{{ sort_type }}">{{ history_type }}</a> {% endif %}</td>
                                    <td class="text-left">{% if sort == 'phone' %} <a href="{{ sort_phone }}" class="{{ order|lower }}">{{ history_phone }}</a> {% else %} <a href="{{ sort_phone }}">{{ history_phone }}</a> {% endif %}</td>
                                    <td class="text-left">{% if sort == 'sent_on' %} <a href="{{ sort_sent_on }}" class="{{ order|lower }}">{{ history_date }}</a> {% else %} <a href="{{ sort_sent_on }}">{{ history_date }}</a> {% endif %}</td>
                                </tr>
                                </thead>
                                <tbody>

                                {% if history %}
                                    {% for item in history %}
                                        <tr>
                                            <td class="text-left">
                                                {{ item.status }}
                                            </td>
                                            <td class="text-left">
                                                {{ item.message }}
                                            </td>
                                            <td class="text-left">
                                                {{ item.details }}
                                            </td>
                                            <td class="text-left">
                                                {{ item.content }}
                                            </td>
                                            <td class="text-left">
                                                {{ item.type }}
                                            </td>
                                            <td class="text-left">
                                                {{ item.phone }}
                                            </td>
                                            <td class="text-left">
                                                {{ item.sent_on }}
                                            </td>
                                        </tr>
                                    {% endfor %}
                                {% else %}
                                    <tr>
                                        <td class="text-center" colspan="7">{{ text_no_results }}</td>
                                    </tr>
                                {% endif %}
                                </tbody>

                            </table>
                        </div>
                        <div class="row">
                            <div class="col-sm-6 text-left">{{ pagination }}</div>
                            <div class="col-sm-6 text-right">{{ results }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript"><!--
        $('#input-date').daterangepicker({
            "showDropdowns": true,
            "singleDatePicker": true,
	        "timePicker": false,
            "linkedCalendars": false,
            "showCustomRangeLabel": false,
            "autoApply": true,
            "locale": {
                "format": 'YYYY-MM-DD'
            }
        });
        $('#button-filter').on('click', function() {
            var url = '';

            var filter_status = $('input[name=\'filter_status\']').val();

            if (filter_status) {
                url += '&filter_status=' + encodeURIComponent(filter_status);
            }

            var filter_message = $('input[name=\'filter_message\']').val();

            if (filter_message) {
                url += '&filter_message=' + encodeURIComponent(filter_message);
            }

            var filter_details = $('input[name=\'filter_details\']').val();

            if (filter_details) {
                url += '&filter_details=' + encodeURIComponent(filter_details);
            }

            var filter_content = $('input[name=\'filter_content\']').val();

            if (filter_content) {
                url += '&filter_content=' + encodeURIComponent(filter_content);
            }

            var filter_type = $('select[name=\'filter_type\']').val();

            if (filter_type !== '') {
                url += '&filter_type=' + encodeURIComponent(filter_type);
            }

            var filter_date = $('input[name=\'filter_date\']').val();

            if (filter_date !== '') {
                url += '&filter_date=' + encodeURIComponent(filter_date);
            }

            var filter_phone = $('input[name=\'filter_phone\']').val();

            if (filter_phone !== '') {
                url += '&filter_phone=' + encodeURIComponent(filter_phone);
            }

            location = 'index.php?route=extension/sendsms/sendsms/history&user_token={{ user_token }}' + url;
        });
    //--></script>
</div>
{{ footer }}
